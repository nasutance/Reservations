import{f as r,o as n,F as f,k as _,c as C,n as U,C as B,u as a,i as g,Q as M,L as S,w as x,b as s,g as w,a as d,d as h,s as i,G as c,B as v,t as m,e as p,K as q}from"./app-B-tQF5bk.js";import{_ as F}from"./AppLayout-B1xB8tj_.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as L}from"./ReserveButton-D5_KepEe.js";import"./LoginForm-Ratsc0cY.js";import"./TextInput-B4iLZsyA.js";import"./PrimaryButton-qNvZXHLC.js";const I={class:"flex flex-wrap gap-1 mt-4"},N={__name:"Pagination",props:{links:Array},setup(y){return(l,b)=>(n(),r("div",I,[(n(!0),r(f,null,_(y.links,(o,u)=>(n(),C(B(o.url?a(g):"span"),{key:u,href:o.url||void 0,class:U(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white":o.active,"text-gray-500 cursor-not-allowed":!o.url,"hover:bg-blue-100":o.url&&!o.active}]),innerHTML:o.label},null,8,["href","class","innerHTML"]))),128))]))}},R=D(N,[["__scopeId","data-v-70da7edf"]]),$=["value"],A={key:0,class:"mb-6"},H={class:"flex gap-2 flex-wrap mt-2"},P={class:"space-y-4"},j={class:"flex flex-col gap-1"},z={class:"text-sm text-gray-600"},E={key:0},G={key:1},K={key:2},O={key:3},Q={class:"mt-2"},J={__name:"Index",setup(y){const l=M(),b=l.props.shows;l.props.auth.user;const o=S({q:l.props.filters.q||"",min_duration:l.props.filters.min_duration||"",max_duration:l.props.filters.max_duration||"",postal_code:l.props.filters.postal_code||"",sort:l.props.filters.sort||"",direction:l.props.filters.direction||"asc",tag:l.props.filters.tag||""}),u=l.props.tags;function k(){q.get(route("show.index"),o,{preserveScroll:!0,preserveState:!0})}function T(){Object.assign(o,{q:"",min_duration:"",max_duration:"",postal_code:"",sort:"",direction:"asc"}),k()}return(V,t)=>(n(),C(F,null,{default:x(()=>[s("div",null,[t[13]||(t[13]=s("h1",{class:"text-2xl font-bold mb-4"},"Liste des spectacles",-1)),s("form",{onSubmit:h(k,["prevent"]),class:"space-y-2 mb-6"},[i(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.q=e),placeholder:"Mot-clé",class:"input"},null,512),[[c,o.q]]),i(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>o.min_duration=e),placeholder:"Durée min",class:"input"},null,512),[[c,o.min_duration]]),i(s("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.max_duration=e),placeholder:"Durée max",class:"input"},null,512),[[c,o.max_duration]]),i(s("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.postal_code=e),placeholder:"Code postal",class:"input"},null,512),[[c,o.postal_code]]),i(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.sort=e),class:"input"},t[7]||(t[7]=[s("option",{value:""},"-- Tri --",-1),s("option",{value:"title"},"Titre",-1),s("option",{value:"duration"},"Durée",-1)]),512),[[v,o.sort]]),i(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.direction=e),class:"input"},t[8]||(t[8]=[s("option",{value:"asc"},"Asc",-1),s("option",{value:"desc"},"Desc",-1)]),512),[[v,o.direction]]),i(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.tag=e),class:"input"},[t[9]||(t[9]=s("option",{value:""},"-- Filtrer par mot-clé --",-1)),(n(!0),r(f,null,_(a(u),e=>(n(),r("option",{key:e.id,value:e.id},m(e.tag),9,$))),128))],512),[[v,o.tag]]),t[10]||(t[10]=s("button",{type:"submit",class:"btn"},"Filtrer",-1)),s("button",{onClick:h(T,["prevent"]),class:"btn"},"Réinitialiser")],32),a(u).length?(n(),r("div",A,[t[11]||(t[11]=s("p",{class:"font-semibold"},[p("Spectacles "),s("span",{class:"italic"},"sans"),p(" ces mots-clés :")],-1)),s("ul",H,[(n(!0),r(f,null,_(a(u),e=>(n(),r("li",{key:e.id},[d(a(g),{href:V.route("show.withoutTag",e.id),class:"text-red-600 hover:underline text-sm bg-red-100 px-2 py-1 rounded"},{default:x(()=>[p(m(e.tag),1)]),_:2},1032,["href"])]))),128))])])):w("",!0),s("ul",P,[(n(!0),r(f,null,_(a(b).data,e=>(n(),r("li",{key:e.id,class:"border p-4 rounded shadow-sm"},[s("div",j,[d(a(g),{href:V.route("show.show",e.id),class:"text-blue-600 hover:underline text-lg font-semibold"},{default:x(()=>[p(m(e.title),1)]),_:2},1032,["href"]),s("div",z,[e.bookable?w("",!0):(n(),r("em",E,"Réservation indisponible")),e.representations_count===1?(n(),r("span",G," - 1 représentation")):e.representations_count>1?(n(),r("span",K," - "+m(e.representations_count)+" représentations",1)):(n(),r("span",O,t[12]||(t[12]=[p(" - "),s("em",null,"aucune représentation",-1)])))]),s("div",Q,[d(L,{"show-id":e.id,bookable:e.bookable,"representations-count":e.representations_count},null,8,["show-id","bookable","representations-count"])])])]))),128))]),d(R,{links:a(b).links},null,8,["links"])])]),_:1}))}},oe=D(J,[["__scopeId","data-v-b71fb3db"]]);export{oe as default};
