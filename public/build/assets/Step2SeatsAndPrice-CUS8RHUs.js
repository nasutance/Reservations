import{j as _,B as x,h as p,f as n,o as l,b as s,g as h,F as y,l as w,t as u,m as g,p as S}from"./app-CPfZOMTh.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"space-y-4 mb-6"},k={class:"font-semibold"},F={class:"text-sm text-gray-600"},B={class:"flex items-center gap-2"},C=["onUpdate:modelValue"],O={key:0,class:"text-right font-semibold text-lg"},P={class:"flex justify-between mt-8"},V=["disabled"],A={__name:"Step2SeatsAndPrice",props:{form:Object,show:Object},emits:["next","previous"],setup(c,{emit:m}){const i=c,v=m,a=_({});x(()=>{i.show.prices.forEach(o=>{var e,t;a.value[o.id]=((t=(e=i.form.quantities)==null?void 0:e.find(r=>r.price_id===o.id))==null?void 0:t.quantity)??0})});const d=p(()=>Object.values(a.value).reduce((o,e)=>o+(parseInt(e)||0),0)),b=p(()=>i.show.prices.reduce((o,e)=>{const t=a.value[e.id]||0;return o+t*parseFloat(e.price)},0));function f(){const o=i.show.prices.map(e=>({price_id:e.id,quantity:a.value[e.id]||0})).filter(e=>e.quantity>0);v("next",{quantities:o,seats:d.value})}return(o,e)=>(l(),n("div",null,[e[2]||(e[2]=s("h2",{class:"text-xl font-semibold mb-4"},"Étape 2 : Choix des tarifs et nombre de places",-1)),s("ul",q,[(l(!0),n(y,null,w(c.show.prices,t=>(l(),n("li",{key:t.id,class:"border p-4 rounded shadow-sm flex justify-between items-center"},[s("div",null,[s("p",k,u(t.type),1),s("p",F,u(parseFloat(t.price).toFixed(2))+" €",1)]),s("div",B,[g(s("input",{type:"number",min:"0",class:"w-16 border rounded px-2 py-1 text-right","onUpdate:modelValue":r=>a.value[t.id]=r},null,8,C),[[S,a.value[t.id],void 0,{number:!0}]]),e[1]||(e[1]=s("span",null,"place(s)",-1))])]))),128))]),d.value>0?(l(),n("div",O," Total estimé : "+u(b.value.toFixed(2))+" € ",1)):h("",!0),s("div",P,[s("button",{onClick:e[0]||(e[0]=t=>o.$emit("previous")),class:"btn-secondary"},"Précédent"),s("button",{disabled:d.value===0,onClick:f,class:"btn"},"Suivant",8,V)])]))}},I=j(A,[["__scopeId","data-v-57f2dcd8"]]);export{I as default};
