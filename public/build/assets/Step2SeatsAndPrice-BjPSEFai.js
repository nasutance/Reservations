import{l as x,j as _,h as c,f as n,o as l,b as t,g as h,F as y,C as w,t as r,m as g,E as S}from"./app-C5w2AHRA.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={class:"space-y-4 mb-6"},q={class:"font-semibold"},F={class:"text-sm text-gray-600"},C={class:"flex items-center gap-2"},P=["onUpdate:modelValue"],V={key:0,class:"text-right font-semibold text-lg"},B={class:"flex justify-between mt-8"},E=["disabled"],O={__name:"Step2SeatsAndPrice",props:{form:Object,show:Object},emits:["next","previous"],setup(u,{emit:m}){const i=u,p=m,a=x({});_(()=>{i.show.prices.forEach(s=>{var e;a.value[s.id]=((e=i.form.quantities)==null?void 0:e[s.id])??0})});const d=c(()=>Object.values(a.value).reduce((s,e)=>s+(parseInt(e)||0),0)),v=c(()=>i.show.prices.reduce((s,e)=>{const o=a.value[e.id]||0;return s+o*parseFloat(e.price)},0));function b(){const s=i.show.prices.map(e=>({price_id:e.id,quantity:a.value[e.id]||0})).filter(e=>e.quantity>0);p("next",{quantities:s,seats:d.value})}return(s,e)=>(l(),n("div",null,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold mb-4"},"Étape 2 : Choix des tarifs et nombre de places",-1)),t("ul",k,[(l(!0),n(y,null,w(u.show.prices,o=>(l(),n("li",{key:o.id,class:"border p-4 rounded shadow-sm flex justify-between items-center"},[t("div",null,[t("p",q,r(o.description),1),t("p",F,r(parseFloat(o.price).toFixed(2))+" €",1)]),t("div",C,[g(t("input",{type:"number",min:"0",class:"w-16 border rounded px-2 py-1 text-right","onUpdate:modelValue":f=>a.value[o.id]=f},null,8,P),[[S,a.value[o.id],void 0,{number:!0}]]),e[1]||(e[1]=t("span",null,"place(s)",-1))])]))),128))]),d.value>0?(l(),n("div",V," Total estimé : "+r(v.value.toFixed(2))+" € ",1)):h("",!0),t("div",B,[t("button",{onClick:e[0]||(e[0]=o=>s.$emit("previous")),class:"btn-secondary"},"Précédent"),t("button",{disabled:d.value===0,onClick:b,class:"btn"},"Suivant",8,E)])]))}},I=j(O,[["__scopeId","data-v-f1e18151"]]);export{I as default};
