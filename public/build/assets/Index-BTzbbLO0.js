import{f as r,o as n,F as m,l as f,c as S,n as q,K as M,u,i as h,Q as B,h as F,R,w as k,b as s,g as V,a as v,d as w,m as i,p,s as x,t as d,e as c,q as C}from"./app-B-4EFQTM.js";import{_ as I}from"./AppLayout-CWzpInH5.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as L}from"./ReserveButton-B3raYeo5.js";import"./LoginForm-BjtRscd7.js";import"./TextInput-BrBbZrT6.js";import"./PrimaryButton-BmvZxUB_.js";const N={class:"flex flex-wrap gap-1 mt-4"},$={__name:"Pagination",props:{links:Array},setup(g){return(a,_)=>(n(),r("div",N,[(n(!0),r(m,null,f(g.links,(l,o)=>(n(),S(M(l.url?u(h):"span"),{key:o,href:l.url||void 0,class:q(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white":l.active,"text-gray-500 cursor-not-allowed":!l.url,"hover:bg-blue-100":l.url&&!l.active}]),innerHTML:l.label},null,8,["href","class","innerHTML"]))),128))]))}},A=D($,[["__scopeId","data-v-70da7edf"]]),H=["value"],P={key:0,class:"mb-6"},j={class:"flex gap-2 flex-wrap mt-2"},z=["onClick"],E={class:"space-y-4"},K={class:"flex flex-col gap-1"},O={class:"text-sm text-gray-600"},Q={key:0},W={key:1},G={key:2},J={key:3},X={class:"mt-2"},Y={__name:"Index",setup(g){const a=B(),_=F(()=>a.props.shows),l=a.props.tags||[],o=R({q:a.props.filters.q||"",min_duration:a.props.filters.min_duration||"",max_duration:a.props.filters.max_duration||"",postal_code:a.props.filters.postal_code||"",sort:a.props.filters.sort||"",direction:a.props.filters.direction||"asc",tag:a.props.filters.tag||""});function y(){C.get(route("show.index"),o,{preserveScroll:!0,preserveState:!0})}function T(){Object.assign(o,{q:"",min_duration:"",max_duration:"",postal_code:"",sort:"",direction:"asc",tag:""}),y()}function U(b){C.get(route("show.index"),{...o,without_tag:b},{preserveScroll:!0,preserveState:!0})}return(b,t)=>(n(),S(I,null,{default:k(()=>[s("div",null,[t[13]||(t[13]=s("h1",{class:"text-2xl font-bold mb-4"},"Liste des spectacles",-1)),s("form",{onSubmit:w(y,["prevent"]),class:"space-y-2 mb-6"},[i(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.q=e),placeholder:"Mot-clé",class:"input"},null,512),[[p,o.q]]),i(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>o.min_duration=e),placeholder:"Durée min",class:"input"},null,512),[[p,o.min_duration]]),i(s("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.max_duration=e),placeholder:"Durée max",class:"input"},null,512),[[p,o.max_duration]]),i(s("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.postal_code=e),placeholder:"Code postal",class:"input"},null,512),[[p,o.postal_code]]),i(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.sort=e),class:"input"},t[7]||(t[7]=[s("option",{value:""},"-- Tri --",-1),s("option",{value:"title"},"Titre",-1),s("option",{value:"duration"},"Durée",-1)]),512),[[x,o.sort]]),i(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.direction=e),class:"input"},t[8]||(t[8]=[s("option",{value:"asc"},"Asc",-1),s("option",{value:"desc"},"Desc",-1)]),512),[[x,o.direction]]),i(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.tag=e),class:"input"},[t[9]||(t[9]=s("option",{value:""},"-- Filtrer par mot-clé --",-1)),(n(!0),r(m,null,f(u(l),e=>(n(),r("option",{key:e.id,value:e.id},d(e.tag),9,H))),128))],512),[[x,o.tag]]),t[10]||(t[10]=s("button",{type:"submit",class:"btn"},"Filtrer",-1)),s("button",{onClick:w(T,["prevent"]),class:"btn"},"Réinitialiser")],32),u(l).length?(n(),r("div",P,[t[11]||(t[11]=s("p",{class:"font-semibold"},[c("Spectacles "),s("span",{class:"italic"},"sans"),c(" ces mots-clés :")],-1)),s("ul",j,[(n(!0),r(m,null,f(u(l),e=>(n(),r("li",{key:e.id},[s("button",{onClick:Z=>U(e.id),class:"text-red-600 hover:underline text-sm bg-red-100 px-2 py-1 rounded"},d(e.tag),9,z)]))),128))])])):V("",!0),s("ul",E,[(n(!0),r(m,null,f(_.value.data,e=>(n(),r("li",{key:e.id,class:"border p-4 rounded shadow-sm"},[s("div",K,[v(u(h),{href:b.route("show.show",e.id),class:"text-blue-600 hover:underline text-lg font-semibold"},{default:k(()=>[c(d(e.title),1)]),_:2},1032,["href"]),s("div",O,[e.bookable?V("",!0):(n(),r("em",Q,"Réservation indisponible")),e.representations_count===1?(n(),r("span",W," - 1 représentation")):e.representations_count>1?(n(),r("span",G," - "+d(e.representations_count)+" représentations",1)):(n(),r("span",J,t[12]||(t[12]=[c(" - "),s("em",null,"aucune représentation",-1)])))]),s("div",X,[v(L,{"show-id":e.id,bookable:e.bookable,"representations-count":e.representations_count},null,8,["show-id","bookable","representations-count"])])])]))),128))]),v(A,{links:_.value.links},null,8,["links"])])]),_:1}))}},ae=D(Y,[["__scopeId","data-v-7fe4b6b4"]]);export{ae as default};
