import{j as L,f as d,o as n,b as u,g as f,t as g,r as D,Q as w,h as R,a as l,w as p,e as k,c as x,u as h,F as C,k as B}from"./app-CLmhwZiQ.js";import{B as $,_ as V}from"./AdminArtistSection-BWwQc5Cc.js";import{_ as y}from"./DataTable-D1MpBSIu.js";import N from"./AdminUserSection-D26KMb7v.js";import{f as T}from"./index-QpX7e-i6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={key:0,class:"mt-2"},F={__name:"ToggleDetails",props:{openLabel:{type:String,default:"Voir détails"},closeLabel:{type:String,default:"Masquer"}},setup(r){const s=L(!1);function c(){s.value=!s.value}return(t,a)=>(n(),d("div",null,[u("button",{onClick:c,class:"p-2 rounded bg-blue-500 text-white hover:bg-blue-600 transition"},g(s.value?r.closeLabel:r.openLabel),1),s.value?(n(),d("div",q,[D(t.$slots,"default")])):f("",!0)]))}};function A(){const r=w().props.reservations||[],s=w().props.prices||[];return{formattedReservations:R(()=>r.map(t=>{var a,o,v,b,_;return{id:t.id,user:t.user?`${t.user.firstname} ${t.user.lastname}`:"-",showTitle:((o=(a=t.representations[0])==null?void 0:a.show)==null?void 0:o.title)||"-",schedule:(v=t.representations[0])!=null&&v.schedule?T(t.representations[0].schedule):"-",location:((_=(b=t.representations[0])==null?void 0:b.location)==null?void 0:_.designation)||"-",status:t.status,detail:t.representations.length?t.representations.map(e=>{const i=s.find(m=>m.id===e.pivot.price_id);return i?`${e.pivot.quantity} ${i.description}`:`${e.pivot.quantity} -`}).join("<br>"):"-"}}))}}function j(){const r=w().props.shows??[],s=w().props.representations??[];return{formattedShows:R(()=>r.map(t=>{const a=s.filter(o=>o.show_id===t.id).map(o=>({...o,location:o.location||null}));return{id:t.id,title:t.title,description:t.description,duration:t.duration?`${t.duration} min`:"-",bookable:t.bookable?"Oui":"Non",representations:a}}))}}const E={class:"flex space-x-4 mb-8"},M={key:1},O={key:2},U={class:"pl-4 list-disc"},K={__name:"AdminDashboard",setup(r){const{formattedReservations:s}=A(),{formattedShows:c}=j(),t=L(""),a=["#","Utilisateur","Spectacle","Date","Lieu","Statut","Détails"],o=["id","user","showTitle","schedule","location","status","detail"],v=["#","Titre","Description","Durée","Réservable","Représentations"],b=["id","title","description","duration","bookable","representations"];return(_,e)=>(n(),d("div",null,[e[10]||(e[10]=u("h2",{class:"text-2xl font-bold mb-6"},"Espace Admin",-1)),u("div",E,[l($,{onClick:e[0]||(e[0]=i=>t.value="users")},{default:p(()=>e[4]||(e[4]=[k("Utilisateurs")])),_:1}),l($,{onClick:e[1]||(e[1]=i=>t.value="reservations")},{default:p(()=>e[5]||(e[5]=[k("Réservations")])),_:1}),l($,{onClick:e[2]||(e[2]=i=>t.value="shows")},{default:p(()=>e[6]||(e[6]=[k("Spectacles")])),_:1}),l($,{onClick:e[3]||(e[3]=i=>t.value="artists")},{default:p(()=>e[7]||(e[7]=[k("Artistes")])),_:1})]),u("div",null,[t.value==="users"?(n(),x(N,{key:0})):f("",!0),t.value==="reservations"?(n(),d("div",M,[e[8]||(e[8]=u("h3",{class:"text-xl font-semibold mb-4"},"Liste des réservations",-1)),l(y,{headers:a,fields:o,rows:h(s)},null,8,["rows"])])):f("",!0),t.value==="shows"?(n(),d("div",O,[e[9]||(e[9]=u("h3",{class:"text-xl font-semibold mb-4"},"Liste des spectacles",-1)),l(y,{headers:v,fields:b,rows:h(c)},{representations:p(({row:i})=>[l(F,{openLabel:"Voir représentations",closeLabel:"Masquer représentations"},{default:p(()=>[u("ul",U,[(n(!0),d(C,null,B(i.representations,m=>{var S;return n(),d("li",{key:m.id}," 📅 "+g(m.schedule)+" — 📍 "+g(((S=m.location)==null?void 0:S.designation)||"-"),1)}),128))])]),_:2},1024)]),_:1},8,["rows"])])):f("",!0),t.value==="artists"?(n(),x(V,{key:3})):f("",!0)])]))}};export{K as default};
