import{Q as S,h as _,T as A,c as T,o as t,w as h,b as o,f as s,g as v,t as a,e as u,F as i,l as m,u as p,d as B,m as D,s as N,a as k,i as V}from"./app-B-4EFQTM.js";import{_ as L}from"./AppLayout-CWzpInH5.js";import{R as M}from"./ReserveButton-B3raYeo5.js";import{f as R}from"./formatDate-D984MnE_.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginForm-BjtRscd7.js";import"./TextInput-BrBbZrT6.js";import"./PrimaryButton-BmvZxUB_.js";const j={class:"text-2xl font-bold mb-4"},C={class:"mb-4"},F=["src","alt"],$={key:1,width:"200",height:"100",class:"border"},E={key:0},I={key:1,class:"list-disc list-inside"},Q={key:2},U={key:3,class:"mt-4"},q=["value"],z={key:4},G={key:0},H={key:1},J={key:2},K={class:"mt-1"},O={key:5},P={class:"mt-6"},W={__name:"Show",setup(X){const f=S(),n=_(()=>f.props.show),b=f.props.auth.user,y=f.props.allTags,g=A({tag_id:""}),d=_(()=>{var e;const c={auteur:[],scénographe:[],comédien:[]};for(const l of n.value.artist_types??[]){const r=(e=l.type)==null?void 0:e.type;c[r]&&c[r].push(l.artist)}return c});function w(){g.post(route("show.attachTag",n.value.id),{preserveScroll:!0,onSuccess:()=>g.reset()})}return(c,e)=>(t(),T(L,null,{default:h(()=>[o("article",null,[o("h1",j,a(n.value.title),1),o("div",C,[n.value.poster_url?(t(),s("img",{key:0,src:`/images/${n.value.poster_url}`,alt:n.value.title,width:"200"},null,8,F)):(t(),s("canvas",$))]),n.value.location?(t(),s("p",E,[e[1]||(e[1]=o("strong",null,"Lieu de création :",-1)),u(" "+a(n.value.location.designation),1)])):v("",!0),o("p",null,[e[2]||(e[2]=o("strong",null,"Durée :",-1)),u(" "+a(n.value.duration)+" minutes",1)]),o("p",null,[e[3]||(e[3]=o("strong",null,"Année de création :",-1)),u(" "+a(n.value.created_in),1)]),o("p",null,[o("em",null,a(n.value.bookable?"Réservable":"Non réservable"),1)]),e[9]||(e[9]=o("h2",{class:"mt-6 font-semibold"},"Mots-clés",-1)),n.value.tags&&n.value.tags.length?(t(),s("ul",I,[(t(!0),s(i,null,m(n.value.tags,l=>(t(),s("li",{key:l.id},a(l.tag),1))),128))])):(t(),s("p",Q,"Aucun mot-clé associé.")),p(b)&&p(b).role==="admin"?(t(),s("div",U,[o("form",{onSubmit:B(w,["prevent"])},[e[4]||(e[4]=o("label",{for:"tag_id",class:"block font-semibold mb-1"},"Ajouter un mot-clé",-1)),D(o("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>p(g).tag_id=l),id:"tag_id",class:"border p-2 rounded mb-2"},[(t(!0),s(i,null,m(p(y),l=>(t(),s("option",{value:l.id,key:l.id},a(l.tag),9,q))),128))],512),[[N,p(g).tag_id]]),e[5]||(e[5]=o("button",{type:"submit",class:"btn"},"Ajouter",-1))],32)])):v("",!0),e[10]||(e[10]=o("h2",{class:"mt-6 font-semibold"},"Liste des représentations",-1)),n.value.representations.length?(t(),s("ul",z,[(t(!0),s(i,null,m(n.value.representations,l=>(t(),s("li",{key:l.id,class:"mb-2"},[o("div",null,[u(a(p(R)(l.schedule))+" ",1),l.location?(t(),s("span",G," ("+a(l.location.designation)+") ",1)):n.value.location?(t(),s("span",H," ("+a(n.value.location.designation)+") ",1)):(t(),s("span",J," (lieu à déterminer) "))]),o("div",K,[k(M,{"show-id":n.value.id,bookable:n.value.bookable,"representations-count":n.value.representations.length},null,8,["show-id","bookable","representations-count"])])]))),128))])):(t(),s("p",O,"Aucune représentation")),e[11]||(e[11]=o("h2",{class:"mt-6 font-semibold"},"Liste des artistes",-1)),o("p",null,[e[6]||(e[6]=o("strong",null,"Auteur :",-1)),(t(!0),s(i,null,m(d.value.auteur,(l,r)=>(t(),s("span",{key:r},[u(a(l.firstname)+" "+a(l.lastname)+" ",1),r===d.value.auteur.length-2?(t(),s(i,{key:0},[u(" et ")],64)):r<d.value.auteur.length-1?(t(),s(i,{key:1},[u(", ")],64)):v("",!0)]))),128))]),o("p",null,[e[7]||(e[7]=o("strong",null,"Metteur en scène :",-1)),(t(!0),s(i,null,m(d.value.scénographe,(l,r)=>(t(),s("span",{key:r},[u(a(l.firstname)+" "+a(l.lastname)+" ",1),r===d.value.scénographe.length-2?(t(),s(i,{key:0},[u(" et ")],64)):r<d.value.scénographe.length-1?(t(),s(i,{key:1},[u(", ")],64)):v("",!0)]))),128))]),o("p",null,[e[8]||(e[8]=o("strong",null,"Distribution :",-1)),(t(!0),s(i,null,m(d.value.comédien,(l,r)=>(t(),s("span",{key:r},[u(a(l.firstname)+" "+a(l.lastname)+" ",1),r===d.value.comédien.length-2?(t(),s(i,{key:0},[u(" et ")],64)):r<d.value.comédien.length-1?(t(),s(i,{key:1},[u(", ")],64)):v("",!0)]))),128))])]),o("nav",P,[k(p(V),{href:c.route("show.index"),class:"text-blue-600 hover:underline"},{default:h(()=>e[12]||(e[12]=[u(" Retour à l'index ")])),_:1},8,["href"])])]),_:1}))}},at=x(W,[["__scopeId","data-v-f30ec382"]]);export{at as default};
