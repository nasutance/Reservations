import{Q as U,h as T,T as V,c as j,o as e,w as x,b as l,f as s,g as c,t as r,e as i,F as a,l as v,u as d,d as B,m as k,s as F,p as D,a as L,i as C}from"./app-Bh02FyaR.js";import{_ as $}from"./AppLayout-rhG7Lw4x.js";import{R as E}from"./ReserveButton-n4nrFM2t.js";import{f as I}from"./formatDate-D984MnE_.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginForm-CFm5s5r3.js";import"./TextInput-BtbuKTg-.js";import"./PrimaryButton-CBpScTSN.js";const Y={class:"text-2xl font-bold mb-4"},q={class:"mb-4"},z=["src","alt"],G={key:1,width:"200",height:"100",class:"border"},H={key:0},J={key:1,class:"list-disc list-inside"},K={key:2},O={key:3,class:"mt-4"},P=["value"],W={key:4},X=["src"],Z={key:5},tt={key:6,class:"mt-4"},et={key:7},st={key:0},ot={key:1},lt={key:2},nt={class:"mt-1"},rt={key:8},ut={class:"mt-6"},it={__name:"Show",setup(at){var w;const g=U(),n=T(()=>g.props.show),y=g.props.auth.user,M=g.props.allTags,f=V({tag_id:""}),h=(w=y==null?void 0:y.roles)==null?void 0:w.some(p=>p.role==="admin"),m=T(()=>{var t,o,u;const p={auteur:[],scénographe:[],comédien:[]};for(const S of n.value.artist_type_show??[]){const _=(o=(t=S.artist_type)==null?void 0:t.type)==null?void 0:o.type,A=(u=S.artist_type)==null?void 0:u.artist;_&&A&&p[_]&&p[_].push(A)}return p}),b=V({title:"",video_url:"",show_id:n.value.id});function N(){b.post(route("videos.store"),{preserveScroll:!0,onSuccess:()=>b.reset()})}function R(){f.post(route("show.attachTag",n.value.id),{preserveScroll:!0,onSuccess:()=>f.reset()})}return(p,t)=>(e(),j($,null,{default:x(()=>[l("article",null,[l("h1",Y,r(n.value.title),1),l("div",q,[n.value.poster_url?(e(),s("img",{key:0,src:`/images/${n.value.poster_url}`,alt:n.value.title,width:"200"},null,8,z)):(e(),s("canvas",G))]),n.value.location?(e(),s("p",H,[t[3]||(t[3]=l("strong",null,"Lieu de création :",-1)),i(" "+r(n.value.location.designation),1)])):c("",!0),l("p",null,[t[4]||(t[4]=l("strong",null,"Durée :",-1)),i(" "+r(n.value.duration)+" minutes",1)]),l("p",null,[t[5]||(t[5]=l("strong",null,"Année de création :",-1)),i(" "+r(n.value.created_in),1)]),t[14]||(t[14]=l("h2",{class:"mt-6 font-semibold"},"Mots-clés",-1)),n.value.tags&&n.value.tags.length?(e(),s("ul",J,[(e(!0),s(a,null,v(n.value.tags,o=>(e(),s("li",{key:o.id},r(o.tag),1))),128))])):(e(),s("p",K,"Aucun mot-clé associé.")),d(h)?(e(),s("div",O,[l("form",{onSubmit:B(R,["prevent"])},[t[6]||(t[6]=l("label",{for:"tag_id",class:"block font-semibold mb-1"},"Ajouter un mot-clé",-1)),k(l("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>d(f).tag_id=o),id:"tag_id",class:"border p-2 rounded mb-2"},[(e(!0),s(a,null,v(d(M),o=>(e(),s("option",{value:o.id,key:o.id},r(o.tag),9,P))),128))],512),[[F,d(f).tag_id]]),t[7]||(t[7]=l("button",{type:"submit",class:"btn"},"Ajouter",-1))],32)])):c("",!0),t[15]||(t[15]=l("h2",{class:"mt-6 font-semibold"},"Vidéos",-1)),n.value.videos&&n.value.videos.length?(e(),s("div",W,[(e(!0),s(a,null,v(n.value.videos,o=>(e(),s("div",{key:o.id,class:"mb-4"},[l("iframe",{class:"w-full max-w-md",height:"315",src:o.video_url,frameborder:"0",allowfullscreen:""},null,8,X)]))),128))])):(e(),s("p",Z,"Aucune vidéo pour ce spectacle.")),d(h)?(e(),s("div",tt,[l("form",{onSubmit:B(N,["prevent"])},[t[8]||(t[8]=l("label",{for:"title",class:"block font-semibold mb-1"},"Titre de la vidéo",-1)),k(l("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>d(b).title=o),type:"text",class:"border p-2 rounded mb-2 w-full"},null,512),[[D,d(b).title]]),t[9]||(t[9]=l("label",{for:"video_url",class:"block font-semibold mb-1"},"URL (YouTube embed)",-1)),k(l("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>d(b).video_url=o),type:"url",class:"border p-2 rounded mb-2 w-full"},null,512),[[D,d(b).video_url]]),t[10]||(t[10]=l("button",{type:"submit",class:"btn"},"Ajouter la vidéo",-1))],32)])):c("",!0),t[16]||(t[16]=l("h2",{class:"mt-6 font-semibold"},"Liste des représentations",-1)),n.value.representations.length?(e(),s("ul",et,[(e(!0),s(a,null,v(n.value.representations,o=>(e(),s("li",{key:o.id,class:"mb-2"},[l("div",null,[i(r(d(I)(o.schedule))+" ",1),o.location?(e(),s("span",st," ("+r(o.location.designation)+") ",1)):n.value.location?(e(),s("span",ot," ("+r(n.value.location.designation)+") ",1)):(e(),s("span",lt," (lieu à déterminer) "))]),l("div",nt,[L(E,{"show-id":n.value.id,bookable:n.value.bookable,"representations-count":n.value.representations.length},null,8,["show-id","bookable","representations-count"])])]))),128))])):(e(),s("p",rt,"Aucune représentation")),t[17]||(t[17]=l("h2",{class:"mt-6 font-semibold"},"Liste des artistes",-1)),l("p",null,[t[11]||(t[11]=l("strong",null,"Auteur :",-1)),(e(!0),s(a,null,v(m.value.auteur,(o,u)=>(e(),s("span",{key:u},[i(r(o.firstname)+" "+r(o.lastname)+" ",1),u===m.value.auteur.length-2?(e(),s(a,{key:0},[i(" et ")],64)):u<m.value.auteur.length-1?(e(),s(a,{key:1},[i(", ")],64)):c("",!0)]))),128))]),l("p",null,[t[12]||(t[12]=l("strong",null,"Metteur en scène :",-1)),(e(!0),s(a,null,v(m.value.scénographe,(o,u)=>(e(),s("span",{key:u},[i(r(o.firstname)+" "+r(o.lastname)+" ",1),u===m.value.scénographe.length-2?(e(),s(a,{key:0},[i(" et ")],64)):u<m.value.scénographe.length-1?(e(),s(a,{key:1},[i(", ")],64)):c("",!0)]))),128))]),l("p",null,[t[13]||(t[13]=l("strong",null,"Distribution :",-1)),(e(!0),s(a,null,v(m.value.comédien,(o,u)=>(e(),s("span",{key:u},[i(r(o.firstname)+" "+r(o.lastname)+" ",1),u===m.value.comédien.length-2?(e(),s(a,{key:0},[i(" et ")],64)):u<m.value.comédien.length-1?(e(),s(a,{key:1},[i(", ")],64)):c("",!0)]))),128))])]),l("nav",ut,[L(d(C),{href:p.route("show.index"),class:"text-blue-600 hover:underline"},{default:x(()=>t[18]||(t[18]=[i(" Retour à l'index ")])),_:1},8,["href"])])]),_:1}))}},yt=Q(it,[["__scopeId","data-v-7ab1b8bb"]]);export{yt as default};
