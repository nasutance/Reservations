import{j as $,f as l,o,b as a,g as m,t as _,r as x,Q as S,h as w,a as r,w as i,e as c,c as k,F as y,k as L,u as C}from"./app-BjPrvqBw.js";import{B as v,_ as B}from"./ArtistSection-85HWH72-.js";import{_ as V}from"./DataTable-DdQOiEG3.js";import D from"./UserSection-B4qDxGAc.js";import N from"./ResaSection-AWNE2pj9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useFormattedReservations-N80ufqTH.js";const A={key:0,class:"mt-2"},F={__name:"ToggleDetails",props:{openLabel:{type:String,default:"Voir détails"},closeLabel:{type:String,default:"Masquer"}},setup(u){const n=$(!1);function t(){n.value=!n.value}return(s,f)=>(o(),l("div",null,[a("button",{onClick:t,class:"p-2 rounded bg-blue-500 text-white hover:bg-blue-600 transition"},_(n.value?u.closeLabel:u.openLabel),1),n.value?(o(),l("div",A,[x(s.$slots,"default")])):m("",!0)]))}};function R(){const u=S().props.shows??[],n=S().props.representations??[];return{formattedShows:w(()=>u.map(s=>{const f=n.filter(d=>d.show_id===s.id).map(d=>({...d,location:d.location||null}));return{id:s.id,title:s.title,description:s.description,duration:s.duration?`${s.duration} min`:"-",bookable:s.bookable?"Oui":"Non",representations:f}}))}}const T={class:"flex space-x-4 mb-8"},q={key:2},E={class:"pl-4 list-disc"},G={__name:"AdminDashboard",setup(u){const{formattedShows:n}=R(),t=$(""),s=["#","Titre","Description","Durée","Réservable","Représentations"],f=["id","title","description","duration","bookable","representations"];return(d,e)=>(o(),l("div",null,[e[9]||(e[9]=a("h2",{class:"text-2xl font-bold mb-6"},"Espace Admin",-1)),a("div",T,[r(v,{onClick:e[0]||(e[0]=p=>t.value="users")},{default:i(()=>e[4]||(e[4]=[c("Utilisateurs")])),_:1}),r(v,{onClick:e[1]||(e[1]=p=>t.value="reservations")},{default:i(()=>e[5]||(e[5]=[c("Réservations")])),_:1}),r(v,{onClick:e[2]||(e[2]=p=>t.value="shows")},{default:i(()=>e[6]||(e[6]=[c("Spectacles")])),_:1}),r(v,{onClick:e[3]||(e[3]=p=>t.value="artists")},{default:i(()=>e[7]||(e[7]=[c("Artistes")])),_:1})]),a("div",null,[t.value==="users"?(o(),k(D,{key:0})):m("",!0),t.value==="reservations"?(o(),k(N,{key:1})):m("",!0),t.value==="shows"?(o(),l("div",q,[e[8]||(e[8]=a("h3",{class:"text-xl font-semibold mb-4"},"Liste des spectacles",-1)),r(V,{headers:s,fields:f,rows:C(n)},{representations:i(({row:p})=>[r(F,{openLabel:"Voir représentations",closeLabel:"Masquer représentations"},{default:i(()=>[a("ul",E,[(o(!0),l(y,null,L(p.representations,b=>{var g;return o(),l("li",{key:b.id}," 📅 "+_(b.schedule)+" — 📍 "+_(((g=b.location)==null?void 0:g.designation)||"-"),1)}),128))])]),_:2},1024)]),_:1},8,["rows"])])):m("",!0),t.value==="artists"?(o(),k(B,{key:3})):m("",!0)])]))}};export{G as default};
