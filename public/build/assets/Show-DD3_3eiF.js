import{Q as D,h as _,T as h,c as L,o as t,w,b as s,f as o,g as b,t as r,e as a,F as i,l as p,u as d,d as S,m as y,s as M,p as T,a as V,i as N}from"./app-DjTMTZen.js";import{_ as R}from"./AppLayout-COUxv6X4.js";import{R as U}from"./ReserveButton-ChTsWFpI.js";import{f as j}from"./formatDate-D984MnE_.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginForm-IYdeIf1B.js";import"./TextInput-DbmAInEQ.js";import"./PrimaryButton-D1clMPsG.js";const C={class:"text-2xl font-bold mb-4"},$={class:"mb-4"},E=["src","alt"],I={key:1,width:"200",height:"100",class:"border"},Q={key:0},Y={key:1,class:"list-disc list-inside"},q={key:2},z={key:3,class:"mt-4"},G=["value"],H={key:4},J={class:"text-lg font-semibold"},K=["src"],O={key:5},P={key:6,class:"mt-4"},W={key:7},X={key:0},Z={key:1},ee={key:2},te={class:"mt-1"},se={key:8},oe={class:"mt-6"},le={__name:"Show",setup(ne){const k=D(),n=_(()=>k.props.show),f=k.props.auth.user,A=k.props.allTags,g=h({tag_id:""}),m=_(()=>{var e;const c={auteur:[],scénographe:[],comédien:[]};for(const l of n.value.artist_types??[]){const u=(e=l.type)==null?void 0:e.type;c[u]&&c[u].push(l.artist)}return c}),v=h({title:"",video_url:""});function x(){v.post(route("videos.store"),{preserveScroll:!0,onSuccess:()=>v.reset()})}function B(){g.post(route("show.attachTag",n.value.id),{preserveScroll:!0,onSuccess:()=>g.reset()})}return(c,e)=>(t(),L(R,null,{default:w(()=>[s("article",null,[s("h1",C,r(n.value.title),1),s("div",$,[n.value.poster_url?(t(),o("img",{key:0,src:`/images/${n.value.poster_url}`,alt:n.value.title,width:"200"},null,8,E)):(t(),o("canvas",I))]),n.value.location?(t(),o("p",Q,[e[3]||(e[3]=s("strong",null,"Lieu de création :",-1)),a(" "+r(n.value.location.designation),1)])):b("",!0),s("p",null,[e[4]||(e[4]=s("strong",null,"Durée :",-1)),a(" "+r(n.value.duration)+" minutes",1)]),s("p",null,[e[5]||(e[5]=s("strong",null,"Année de création :",-1)),a(" "+r(n.value.created_in),1)]),s("p",null,[s("em",null,r(n.value.bookable?"Réservable":"Non réservable"),1)]),e[14]||(e[14]=s("h2",{class:"mt-6 font-semibold"},"Mots-clés",-1)),n.value.tags&&n.value.tags.length?(t(),o("ul",Y,[(t(!0),o(i,null,p(n.value.tags,l=>(t(),o("li",{key:l.id},r(l.tag),1))),128))])):(t(),o("p",q,"Aucun mot-clé associé.")),d(f)&&d(f).role==="admin"?(t(),o("div",z,[s("form",{onSubmit:S(B,["prevent"])},[e[6]||(e[6]=s("label",{for:"tag_id",class:"block font-semibold mb-1"},"Ajouter un mot-clé",-1)),y(s("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>d(g).tag_id=l),id:"tag_id",class:"border p-2 rounded mb-2"},[(t(!0),o(i,null,p(d(A),l=>(t(),o("option",{value:l.id,key:l.id},r(l.tag),9,G))),128))],512),[[M,d(g).tag_id]]),e[7]||(e[7]=s("button",{type:"submit",class:"btn"},"Ajouter",-1))],32)])):b("",!0),e[15]||(e[15]=s("h2",{class:"mt-6 font-semibold"},"Vidéos",-1)),n.value.videos&&n.value.videos.length?(t(),o("div",H,[(t(!0),o(i,null,p(n.value.videos,l=>(t(),o("div",{key:l.id,class:"mb-4"},[s("h3",J,r(l.title),1),s("iframe",{class:"w-full max-w-md",height:"315",src:l.video_url,frameborder:"0",allowfullscreen:""},null,8,K)]))),128))])):(t(),o("p",O,"Aucune vidéo pour ce spectacle.")),d(f)&&d(f).role==="admin"?(t(),o("div",P,[s("form",{onSubmit:S(x,["prevent"])},[e[8]||(e[8]=s("label",{for:"title",class:"block font-semibold mb-1"},"Titre de la vidéo",-1)),y(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>d(v).title=l),type:"text",class:"border p-2 rounded mb-2 w-full"},null,512),[[T,d(v).title]]),e[9]||(e[9]=s("label",{for:"video_url",class:"block font-semibold mb-1"},"URL (YouTube embed)",-1)),y(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>d(v).video_url=l),type:"url",class:"border p-2 rounded mb-2 w-full"},null,512),[[T,d(v).video_url]]),e[10]||(e[10]=s("button",{type:"submit",class:"btn"},"Ajouter la vidéo",-1))],32)])):b("",!0),e[16]||(e[16]=s("h2",{class:"mt-6 font-semibold"},"Liste des représentations",-1)),n.value.representations.length?(t(),o("ul",W,[(t(!0),o(i,null,p(n.value.representations,l=>(t(),o("li",{key:l.id,class:"mb-2"},[s("div",null,[a(r(d(j)(l.schedule))+" ",1),l.location?(t(),o("span",X," ("+r(l.location.designation)+") ",1)):n.value.location?(t(),o("span",Z," ("+r(n.value.location.designation)+") ",1)):(t(),o("span",ee," (lieu à déterminer) "))]),s("div",te,[V(U,{"show-id":n.value.id,bookable:n.value.bookable,"representations-count":n.value.representations.length},null,8,["show-id","bookable","representations-count"])])]))),128))])):(t(),o("p",se,"Aucune représentation")),e[17]||(e[17]=s("h2",{class:"mt-6 font-semibold"},"Liste des artistes",-1)),s("p",null,[e[11]||(e[11]=s("strong",null,"Auteur :",-1)),(t(!0),o(i,null,p(m.value.auteur,(l,u)=>(t(),o("span",{key:u},[a(r(l.firstname)+" "+r(l.lastname)+" ",1),u===m.value.auteur.length-2?(t(),o(i,{key:0},[a(" et ")],64)):u<m.value.auteur.length-1?(t(),o(i,{key:1},[a(", ")],64)):b("",!0)]))),128))]),s("p",null,[e[12]||(e[12]=s("strong",null,"Metteur en scène :",-1)),(t(!0),o(i,null,p(m.value.scénographe,(l,u)=>(t(),o("span",{key:u},[a(r(l.firstname)+" "+r(l.lastname)+" ",1),u===m.value.scénographe.length-2?(t(),o(i,{key:0},[a(" et ")],64)):u<m.value.scénographe.length-1?(t(),o(i,{key:1},[a(", ")],64)):b("",!0)]))),128))]),s("p",null,[e[13]||(e[13]=s("strong",null,"Distribution :",-1)),(t(!0),o(i,null,p(m.value.comédien,(l,u)=>(t(),o("span",{key:u},[a(r(l.firstname)+" "+r(l.lastname)+" ",1),u===m.value.comédien.length-2?(t(),o(i,{key:0},[a(" et ")],64)):u<m.value.comédien.length-1?(t(),o(i,{key:1},[a(", ")],64)):b("",!0)]))),128))])]),s("nav",oe,[V(d(N),{href:c.route("show.index"),class:"text-blue-600 hover:underline"},{default:w(()=>e[18]||(e[18]=[a(" Retour à l'index ")])),_:1},8,["href"])])]),_:1}))}},be=F(le,[["__scopeId","data-v-33d1efdb"]]);export{be as default};
