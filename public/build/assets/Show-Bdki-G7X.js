import{Q as w,T as S,c as A,o as e,w as h,b as n,f as s,g as c,t as i,u as t,e as a,F as u,k as p,d as B,s as T,B as N,a as f,i as V}from"./app-B-tQF5bk.js";import{_ as D}from"./AppLayout-B1xB8tj_.js";import{R as L}from"./ReserveButton-D5_KepEe.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginForm-Ratsc0cY.js";import"./TextInput-B4iLZsyA.js";import"./PrimaryButton-qNvZXHLC.js";const R={class:"text-2xl font-bold mb-4"},j={class:"mb-4"},C=["src","alt"],F={key:1,width:"200",height:"100",class:"border"},$={key:0},x={key:1,class:"list-disc list-inside"},E={key:2},I={key:3,class:"mt-4"},Q=["value"],U={key:4},q={key:0},z={key:1},G={key:2},H={class:"mt-1"},J={key:5},K={class:"mt-6"},O={__name:"Show",setup(P){const g=w(),r=g.props.show,m=g.props.collaborateurs,_=g.props.auth.user,y=g.props.allTags,b=S({tag_id:""});function v(){b.post(route("show.attachTag",r.id),{preserveScroll:!0,onSuccess:()=>b.reset()})}return(k,o)=>(e(),A(D,null,{default:h(()=>[n("article",null,[n("h1",R,i(t(r).title),1),n("div",j,[t(r).poster_url?(e(),s("img",{key:0,src:`/images/${t(r).poster_url}`,alt:t(r).title,width:"200"},null,8,C)):(e(),s("canvas",F))]),t(r).location?(e(),s("p",$,[o[1]||(o[1]=n("strong",null,"Lieu de création :",-1)),a(" "+i(t(r).location.designation),1)])):c("",!0),n("p",null,[o[2]||(o[2]=n("strong",null,"Durée :",-1)),a(" "+i(t(r).duration)+" minutes",1)]),n("p",null,[o[3]||(o[3]=n("strong",null,"Année de création :",-1)),a(" "+i(t(r).created_in),1)]),n("p",null,[n("em",null,i(t(r).bookable?"Réservable":"Non réservable"),1)]),o[9]||(o[9]=n("h2",{class:"mt-6 font-semibold"},"Mots-clés",-1)),t(r).tags.length?(e(),s("ul",x,[(e(!0),s(u,null,p(t(r).tags,l=>(e(),s("li",{key:l.id},i(l.tag),1))),128))])):(e(),s("p",E,"Aucun mot-clé associé.")),t(_)&&t(_).role==="admin"?(e(),s("div",I,[n("form",{onSubmit:B(v,["prevent"])},[o[4]||(o[4]=n("label",{for:"tag_id",class:"block font-semibold mb-1"},"Ajouter un mot-clé",-1)),T(n("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(b).tag_id=l),id:"tag_id",class:"border p-2 rounded mb-2"},[(e(!0),s(u,null,p(t(y),l=>(e(),s("option",{value:l.id,key:l.id},i(l.tag),9,Q))),128))],512),[[N,t(b).tag_id]]),o[5]||(o[5]=n("button",{type:"submit",class:"btn"},"Ajouter",-1))],32)])):c("",!0),o[10]||(o[10]=n("h2",{class:"mt-6 font-semibold"},"Liste des représentations",-1)),t(r).representations.length?(e(),s("ul",U,[(e(!0),s(u,null,p(t(r).representations,l=>(e(),s("li",{key:l.id,class:"mb-2"},[n("div",null,[a(i(l.schedule)+" ",1),l.location?(e(),s("span",q," ("+i(l.location.designation)+") ",1)):t(r).location?(e(),s("span",z," ("+i(t(r).location.designation)+") ",1)):(e(),s("span",G," (lieu à déterminer) "))]),n("div",H,[f(L,{"show-id":t(r).id,bookable:t(r).bookable,"representations-count":t(r).representations.length},null,8,["show-id","bookable","representations-count"])])]))),128))])):(e(),s("p",J,"Aucune représentation")),o[11]||(o[11]=n("h2",{class:"mt-6 font-semibold"},"Liste des artistes",-1)),n("p",null,[o[6]||(o[6]=n("strong",null,"Auteur :",-1)),(e(!0),s(u,null,p(t(m).auteur,(l,d)=>(e(),s("span",{key:d},[a(i(l.firstname)+" "+i(l.lastname)+" ",1),d===t(m).auteur.length-2?(e(),s(u,{key:0},[a(" et ")],64)):d<t(m).auteur.length-1?(e(),s(u,{key:1},[a(", ")],64)):c("",!0)]))),128))]),n("p",null,[o[7]||(o[7]=n("strong",null,"Metteur en scène :",-1)),(e(!0),s(u,null,p(t(m).scénographe,(l,d)=>(e(),s("span",{key:d},[a(i(l.firstname)+" "+i(l.lastname)+" ",1),d===t(m).scénographe.length-2?(e(),s(u,{key:0},[a(" et ")],64)):d<t(m).scénographe.length-1?(e(),s(u,{key:1},[a(", ")],64)):c("",!0)]))),128))]),n("p",null,[o[8]||(o[8]=n("strong",null,"Distribution :",-1)),(e(!0),s(u,null,p(t(m).comédien,(l,d)=>(e(),s("span",{key:d},[a(i(k.comédien.firstname)+" "+i(k.comédien.lastname)+" ",1),d===t(m).comédien.length-2?(e(),s(u,{key:0},[a(" et ")],64)):d<t(m).comédien.length-1?(e(),s(u,{key:1},[a(", ")],64)):c("",!0)]))),128))])]),n("nav",K,[f(t(V),{href:k.route("show.index"),class:"text-blue-600 hover:underline"},{default:h(()=>o[12]||(o[12]=[a(" Retour à l'index ")])),_:1},8,["href"])])]),_:1}))}},ot=M(O,[["__scopeId","data-v-350956c4"]]);export{ot as default};
