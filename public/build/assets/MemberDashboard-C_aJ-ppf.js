import{h as _,f as i,o as a,b as n,c as f,w as r,g as u,n as h,t as x,q as y}from"./app-BjPrvqBw.js";import{_ as g}from"./DataTable-DdQOiEG3.js";import{u as k}from"./useFormattedReservations-N80ufqTH.js";const b={class:"p-6 text-gray-900"},C=["innerHTML"],$={class:"flex gap-3"},R=["onClick"],S=["onClick"],q={key:1,class:"mt-4 text-gray-500"},T={__name:"MemberDashboard",setup(B){const d=["#","Spectacle","Repr√©sentation","Statut","D√©tail","Actions"],p=["id","showTitle","schedule","status","detail","actions"],{formattedReservations:m,prices:v}=k(),l=_(()=>m.value.map(s=>({...s,detail:s.representations.filter(e=>e.pivot.quantity>0).map(e=>{const t=v.value.find(o=>o.id===e.pivot.price_id);return t?`${e.pivot.quantity} ${t.type}`:`${e.pivot.quantity} -`}).join("<br>")})));function c(s,e){e==="annul√©e"&&!confirm("Confirmer l‚Äôannulation de cette r√©servation ?")||y.visit(`/reservation/${s}`,{method:"patch",data:{status:e},preserveScroll:!0,preserveState:!1})}return(s,e)=>(a(),i("div",null,[e[0]||(e[0]=n("h2",{class:"text-xl font-semibold text-gray-800 leading-tight mb-4"},"Mes r√©servations",-1)),n("div",b,[l.value.length?(a(),f(g,{key:0,headers:d,fields:p,rows:l.value},{status:r(({row:t})=>[n("span",{class:h(["capitalize font-semibold",{"text-yellow-600":t.status==="en attente","text-green-600":t.status==="pay√©e","text-red-600":t.status==="annul√©e"}])},x(t.status),3)]),detail:r(({row:t})=>[n("span",{innerHTML:t.detail},null,8,C)]),actions:r(({row:t})=>[n("div",$,[t.status==="en attente"?(a(),i("button",{key:0,onClick:o=>c(t.id,"pay√©e"),class:"text-sm text-green-600 hover:underline"}," üí≥ Payer ",8,R)):u("",!0),t.status!=="annul√©e"?(a(),i("button",{key:1,onClick:o=>c(t.id,"annul√©e"),class:"text-sm text-red-600 hover:underline"}," ‚ùå Annuler ",8,S)):u("",!0)])]),_:1},8,["rows"])):(a(),i("p",q," Aucune r√©servation pour le moment. "))])]))}};export{T as default};
