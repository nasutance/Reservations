import{f as l,o as d,r as R,j as A,b as p,g as w,t as T,Q as y,h as S,a as u,w as v,e as h,u as x,F as N,k as j}from"./app-B-tQF5bk.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as V,_ as $}from"./index-BPfVgIl7.js";const B={};function q(n,r){return d(),l("button",{class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400",onClick:r[0]||(r[0]=t=>n.$emit("click"))},[R(n.$slots,"default")])}const k=F(B,[["render",q]]),E={key:0,class:"mt-2"},M={__name:"ToggleDetails",props:{openLabel:{type:String,default:"Voir détails"},closeLabel:{type:String,default:"Masquer"}},setup(n){const r=A(!1);function t(){r.value=!r.value}return(s,f)=>(d(),l("div",null,[p("button",{onClick:t,class:"p-2 rounded bg-blue-500 text-white hover:bg-blue-600 transition"},T(r.value?n.closeLabel:n.openLabel),1),r.value?(d(),l("div",E,[R(s.$slots,"default")])):w("",!0)]))}};function O(){const n=y().props.reservations||[],r=y().props.prices||[];return{formattedReservations:S(()=>n.map(s=>{var f,o,c;return{id:s.id,user:s.user?`${s.user.firstname} ${s.user.lastname}`:"-",showTitle:((o=(f=s.representations[0])==null?void 0:f.show)==null?void 0:o.title)||"-",schedule:(c=s.representations[0])!=null&&c.schedule?V(s.representations[0].schedule):"-",status:s.status,detail:s.representations.length?s.representations.map(m=>{const i=r.find(a=>a.id===m.pivot.price_id);return i?`${m.pivot.quantity} ${i.description}`:`${m.pivot.quantity} -`}).join("<br>"):"-"}}))}}function P(){const n=y().props.users??[];return{formattedUsers:S(()=>n.map(t=>({id:t.id,firstname:t.firstname,lastname:t.lastname,email:t.email,langue:t.langue,role:t.roles.length>0?t.roles[0].role:"-"})))}}function Q(){const n=y().props.shows??[];return{formattedShows:S(()=>n.map(t=>({id:t.id,title:t.title,description:t.description,duration:t.duration?`${t.duration} min`:"-",bookable:t.bookable?"Oui":"Non",representations:t.representations??[]})))}}function z(){const n=y().props.artists??[];return{formattedArtists:S(()=>n.map(t=>{var m;const s=t.artistTypes??t.artist_types??[],f=s.map(i=>{var a;return(a=i.type)==null?void 0:a.type}).filter(Boolean),o={};for(const i of s){const a=((m=i.type)==null?void 0:m.type)??"-";for(const b of i.shows??[])o[b.title]||(o[b.title]=[]),o[b.title].push(a)}const c=Object.entries(o).map(([i,a])=>`${i} (${a.join(", ")})`);return{fullname:`${t.firstname} ${t.lastname}`,typesText:f.join(", "),showsText:c.join(" / ")}}))}}const G={class:"flex space-x-4 mb-8"},H={key:0},I={key:1},J={key:2},K={class:"pl-4 list-disc"},W={key:3},et={__name:"AdminDashboard",setup(n){const{formattedReservations:r}=O(),{formattedUsers:t}=P(),{formattedShows:s}=Q(),{formattedArtists:f}=z(),o=A(""),c=["#","Utilisateur","Spectacle","Représentation","Statut","Détails"],m=["id","user","showTitle","schedule","status","detail"],i=["#","Prénom","Nom","Email","Langue","Rôle"],a=["id","firstname","lastname","email","langue","role"],b=["#","Titre","Description","Durée","Réservable","Représentations"],C=["id","title","description","duration","bookable","representations"],U=["Artiste","Types","Spectacles"],D=["fullname","typesText","showsText"];return(X,e)=>(d(),l("div",null,[e[12]||(e[12]=p("h2",{class:"text-2xl font-bold mb-6"},"Espace Admin",-1)),p("div",G,[u(k,{onClick:e[0]||(e[0]=g=>o.value="users")},{default:v(()=>e[4]||(e[4]=[h("Utilisateurs")])),_:1}),u(k,{onClick:e[1]||(e[1]=g=>o.value="reservations")},{default:v(()=>e[5]||(e[5]=[h("Réservations")])),_:1}),u(k,{onClick:e[2]||(e[2]=g=>o.value="shows")},{default:v(()=>e[6]||(e[6]=[h("Spectacles")])),_:1}),u(k,{onClick:e[3]||(e[3]=g=>o.value="artists")},{default:v(()=>e[7]||(e[7]=[h("Artistes")])),_:1})]),p("div",null,[o.value==="users"?(d(),l("div",H,[e[8]||(e[8]=p("h3",{class:"text-xl font-semibold mb-4"},"Liste des utilisateurs",-1)),u($,{headers:i,fields:a,rows:x(t)},null,8,["rows"])])):w("",!0),o.value==="reservations"?(d(),l("div",I,[e[9]||(e[9]=p("h3",{class:"text-xl font-semibold mb-4"},"Liste des réservations",-1)),u($,{headers:c,fields:m,rows:x(r)},null,8,["rows"])])):w("",!0),o.value==="shows"?(d(),l("div",J,[e[10]||(e[10]=p("h3",{class:"text-xl font-semibold mb-4"},"Liste des spectacles",-1)),u($,{headers:b,fields:C,rows:x(s)},{representations:v(({row:g})=>[u(M,{openLabel:"Voir représentations",closeLabel:"Masquer représentations"},{default:v(()=>[p("ul",K,[(d(!0),l(N,null,j(g.representations,_=>{var L;return d(),l("li",{key:_.id}," 📅 "+T(_.schedule)+" — 📍 "+T(((L=_.location)==null?void 0:L.designation)||"-"),1)}),128))])]),_:2},1024)]),_:1},8,["rows"])])):w("",!0),o.value==="artists"?(d(),l("div",W,[e[11]||(e[11]=p("h3",{class:"text-xl font-semibold mb-4"},"Liste des artistes",-1)),u($,{headers:U,fields:D,rows:x(f)},null,8,["rows"])])):w("",!0)])]))}};export{et as default};
