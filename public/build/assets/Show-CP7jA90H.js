import{Q as v,T as w,f as e,o as s,b as n,g as c,t as i,u as t,e as a,F as u,C as p,d as S,m as A,z as T,a as f,w as N,i as V}from"./app-C5w2AHRA.js";import{R as B}from"./ReserveButton-DSzShyS9.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginForm-BqjlpJIp.js";import"./TextInput-C1m4H31m.js";import"./PrimaryButton-D1AC0Iwq.js";const L={class:"text-2xl font-bold mb-4"},M={class:"mb-4"},R=["src","alt"],C={key:1,width:"200",height:"100",class:"border"},j={key:0},F={key:1,class:"list-disc list-inside"},x={key:2},z={key:3,class:"mt-4"},E=["value"],I={key:4},Q={key:0},U={key:1},$={key:2},q={class:"mt-1"},G={key:5},H={class:"mt-6"},J={__name:"Show",setup(K){const g=v(),r=g.props.show,m=g.props.collaborateurs,h=g.props.auth.user,y=g.props.allTags,b=w({tag_id:""});function _(){b.post(route("show.attachTag",r.id),{preserveScroll:!0,onSuccess:()=>b.reset()})}return(k,o)=>(s(),e(u,null,[n("article",null,[n("h1",L,i(t(r).title),1),n("div",M,[t(r).poster_url?(s(),e("img",{key:0,src:`/images/${t(r).poster_url}`,alt:t(r).title,width:"200"},null,8,R)):(s(),e("canvas",C))]),t(r).location?(s(),e("p",j,[o[1]||(o[1]=n("strong",null,"Lieu de création :",-1)),a(" "+i(t(r).location.designation),1)])):c("",!0),n("p",null,[o[2]||(o[2]=n("strong",null,"Durée :",-1)),a(" "+i(t(r).duration)+" minutes",1)]),n("p",null,[o[3]||(o[3]=n("strong",null,"Année de création :",-1)),a(" "+i(t(r).created_in),1)]),n("p",null,[n("em",null,i(t(r).bookable?"Réservable":"Non réservable"),1)]),o[9]||(o[9]=n("h2",{class:"mt-6 font-semibold"},"Mots-clés",-1)),t(r).tags.length?(s(),e("ul",F,[(s(!0),e(u,null,p(t(r).tags,l=>(s(),e("li",{key:l.id},i(l.tag),1))),128))])):(s(),e("p",x,"Aucun mot-clé associé.")),t(h)&&t(h).role==="admin"?(s(),e("div",z,[n("form",{onSubmit:S(_,["prevent"])},[o[4]||(o[4]=n("label",{for:"tag_id",class:"block font-semibold mb-1"},"Ajouter un mot-clé",-1)),A(n("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>t(b).tag_id=l),id:"tag_id",class:"border p-2 rounded mb-2"},[(s(!0),e(u,null,p(t(y),l=>(s(),e("option",{value:l.id,key:l.id},i(l.tag),9,E))),128))],512),[[T,t(b).tag_id]]),o[5]||(o[5]=n("button",{type:"submit",class:"btn"},"Ajouter",-1))],32)])):c("",!0),o[10]||(o[10]=n("h2",{class:"mt-6 font-semibold"},"Liste des représentations",-1)),t(r).representations.length?(s(),e("ul",I,[(s(!0),e(u,null,p(t(r).representations,l=>(s(),e("li",{key:l.id,class:"mb-2"},[n("div",null,[a(i(l.schedule)+" ",1),l.location?(s(),e("span",Q," ("+i(l.location.designation)+") ",1)):t(r).location?(s(),e("span",U," ("+i(t(r).location.designation)+") ",1)):(s(),e("span",$," (lieu à déterminer) "))]),n("div",q,[f(B,{"show-id":t(r).id,bookable:t(r).bookable,"representations-count":t(r).representations.length},null,8,["show-id","bookable","representations-count"])])]))),128))])):(s(),e("p",G,"Aucune représentation")),o[11]||(o[11]=n("h2",{class:"mt-6 font-semibold"},"Liste des artistes",-1)),n("p",null,[o[6]||(o[6]=n("strong",null,"Auteur :",-1)),(s(!0),e(u,null,p(t(m).auteur,(l,d)=>(s(),e("span",{key:d},[a(i(l.firstname)+" "+i(l.lastname)+" ",1),d===t(m).auteur.length-2?(s(),e(u,{key:0},[a(" et ")],64)):d<t(m).auteur.length-1?(s(),e(u,{key:1},[a(", ")],64)):c("",!0)]))),128))]),n("p",null,[o[7]||(o[7]=n("strong",null,"Metteur en scène :",-1)),(s(!0),e(u,null,p(t(m).scénographe,(l,d)=>(s(),e("span",{key:d},[a(i(l.firstname)+" "+i(l.lastname)+" ",1),d===t(m).scénographe.length-2?(s(),e(u,{key:0},[a(" et ")],64)):d<t(m).scénographe.length-1?(s(),e(u,{key:1},[a(", ")],64)):c("",!0)]))),128))]),n("p",null,[o[8]||(o[8]=n("strong",null,"Distribution :",-1)),(s(!0),e(u,null,p(t(m).comédien,(l,d)=>(s(),e("span",{key:d},[a(i(k.comédien.firstname)+" "+i(k.comédien.lastname)+" ",1),d===t(m).comédien.length-2?(s(),e(u,{key:0},[a(" et ")],64)):d<t(m).comédien.length-1?(s(),e(u,{key:1},[a(", ")],64)):c("",!0)]))),128))])]),n("nav",H,[f(t(V),{href:k.route("show.index"),class:"text-blue-600 hover:underline"},{default:N(()=>o[12]||(o[12]=[a(" Retour à l'index ")])),_:1},8,["href"])])],64))}},tt=D(J,[["__scopeId","data-v-3f41ff59"]]);export{tt as default};
