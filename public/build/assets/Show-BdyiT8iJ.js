import{Q as w,T as S,h as A,c as T,o as t,w as h,b as o,f as s,g,t as a,u as l,e as u,F as d,l as m,d as B,m as N,s as V,a as k,i as D}from"./app-CPfZOMTh.js";import{_ as L}from"./AppLayout-D91pYRHM.js";import{R as M}from"./ReserveButton-CHZMDRl4.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoginForm-P07Ne-A8.js";import"./TextInput-lJpKSUFq.js";import"./PrimaryButton-BBGngzfo.js";const x={class:"text-2xl font-bold mb-4"},j={class:"mb-4"},C=["src","alt"],F={key:1,width:"200",height:"100",class:"border"},$={key:0},E={key:1,class:"list-disc list-inside"},I={key:2},Q={key:3,class:"mt-4"},U=["value"],q={key:4},z={key:0},G={key:1},H={key:2},J={class:"mt-1"},K={key:5},O={class:"mt-6"},P={__name:"Show",setup(W){const _=w(),r=_.props.show,f=_.props.auth.user,y=_.props.allTags,b=S({tag_id:""}),p=A(()=>{var e;const c={auteur:[],scénographe:[],comédien:[]};for(const n of r.artist_types??[]){const i=(e=n.type)==null?void 0:e.type;c[i]&&c[i].push(n.artist)}return c});function v(){b.post(route("show.attachTag",r.id),{preserveScroll:!0,onSuccess:()=>b.reset()})}return(c,e)=>(t(),T(L,null,{default:h(()=>[o("article",null,[o("h1",x,a(l(r).title),1),o("div",j,[l(r).poster_url?(t(),s("img",{key:0,src:`/images/${l(r).poster_url}`,alt:l(r).title,width:"200"},null,8,C)):(t(),s("canvas",F))]),l(r).location?(t(),s("p",$,[e[1]||(e[1]=o("strong",null,"Lieu de création :",-1)),u(" "+a(l(r).location.designation),1)])):g("",!0),o("p",null,[e[2]||(e[2]=o("strong",null,"Durée :",-1)),u(" "+a(l(r).duration)+" minutes",1)]),o("p",null,[e[3]||(e[3]=o("strong",null,"Année de création :",-1)),u(" "+a(l(r).created_in),1)]),o("p",null,[o("em",null,a(l(r).bookable?"Réservable":"Non réservable"),1)]),e[9]||(e[9]=o("h2",{class:"mt-6 font-semibold"},"Mots-clés",-1)),l(r).tags.length?(t(),s("ul",E,[(t(!0),s(d,null,m(l(r).tags,n=>(t(),s("li",{key:n.id},a(n.tag),1))),128))])):(t(),s("p",I,"Aucun mot-clé associé.")),l(f)&&l(f).role==="admin"?(t(),s("div",Q,[o("form",{onSubmit:B(v,["prevent"])},[e[4]||(e[4]=o("label",{for:"tag_id",class:"block font-semibold mb-1"},"Ajouter un mot-clé",-1)),N(o("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>l(b).tag_id=n),id:"tag_id",class:"border p-2 rounded mb-2"},[(t(!0),s(d,null,m(l(y),n=>(t(),s("option",{value:n.id,key:n.id},a(n.tag),9,U))),128))],512),[[V,l(b).tag_id]]),e[5]||(e[5]=o("button",{type:"submit",class:"btn"},"Ajouter",-1))],32)])):g("",!0),e[10]||(e[10]=o("h2",{class:"mt-6 font-semibold"},"Liste des représentations",-1)),l(r).representations.length?(t(),s("ul",q,[(t(!0),s(d,null,m(l(r).representations,n=>(t(),s("li",{key:n.id,class:"mb-2"},[o("div",null,[u(a(n.schedule)+" ",1),n.location?(t(),s("span",z," ("+a(n.location.designation)+") ",1)):l(r).location?(t(),s("span",G," ("+a(l(r).location.designation)+") ",1)):(t(),s("span",H," (lieu à déterminer) "))]),o("div",J,[k(M,{"show-id":l(r).id,bookable:l(r).bookable,"representations-count":l(r).representations.length},null,8,["show-id","bookable","representations-count"])])]))),128))])):(t(),s("p",K,"Aucune représentation")),e[11]||(e[11]=o("h2",{class:"mt-6 font-semibold"},"Liste des artistes",-1)),o("p",null,[e[6]||(e[6]=o("strong",null,"Auteur :",-1)),(t(!0),s(d,null,m(p.value.auteur,(n,i)=>(t(),s("span",{key:i},[u(a(n.firstname)+" "+a(n.lastname)+" ",1),i===p.value.auteur.length-2?(t(),s(d,{key:0},[u(" et ")],64)):i<p.value.auteur.length-1?(t(),s(d,{key:1},[u(", ")],64)):g("",!0)]))),128))]),o("p",null,[e[7]||(e[7]=o("strong",null,"Metteur en scène :",-1)),(t(!0),s(d,null,m(p.value.scénographe,(n,i)=>(t(),s("span",{key:i},[u(a(n.firstname)+" "+a(n.lastname)+" ",1),i===p.value.scénographe.length-2?(t(),s(d,{key:0},[u(" et ")],64)):i<p.value.scénographe.length-1?(t(),s(d,{key:1},[u(", ")],64)):g("",!0)]))),128))]),o("p",null,[e[8]||(e[8]=o("strong",null,"Distribution :",-1)),(t(!0),s(d,null,m(p.value.comédien,(n,i)=>(t(),s("span",{key:i},[u(a(n.firstname)+" "+a(n.lastname)+" ",1),i===p.value.comédien.length-2?(t(),s(d,{key:0},[u(" et ")],64)):i<p.value.comédien.length-1?(t(),s(d,{key:1},[u(", ")],64)):g("",!0)]))),128))])]),o("nav",O,[k(l(D),{href:c.route("show.index"),class:"text-blue-600 hover:underline"},{default:h(()=>e[12]||(e[12]=[u(" Retour à l'index ")])),_:1},8,["href"])])]),_:1}))}},nt=R(P,[["__scopeId","data-v-2c53a85f"]]);export{nt as default};
