import{f as a,o as n,F as y,l as g,c as k,n as C,K as M,u,i as V,Q as T,R as U,w as _,b as o,a as c,d as f,m as i,p,s as b,e as x,t as v,g as B,q as R}from"./app-BJ_Yx0_7.js";import{_ as S}from"./AppLayout-Craf6fqR.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as h}from"./ReserveButton-Bh-1iVVw.js";import"./LoginForm-SX8oLhjG.js";import"./TextInput-DIOVXqg1.js";import"./PrimaryButton-DDsy3I2S.js";const F={class:"flex flex-wrap gap-1 mt-4"},I={__name:"Pagination",props:{links:Array},setup(m){return(r,d)=>(n(),a("div",F,[(n(!0),a(y,null,g(m.links,(e,l)=>(n(),k(M(e.url?u(V):"span"),{key:l,href:e.url||void 0,class:C(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white":e.active,"text-gray-500 cursor-not-allowed":!e.url,"hover:bg-blue-100":e.url&&!e.active}]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))]))}},L=D(I,[["__scopeId","data-v-70da7edf"]]),N={class:"space-y-4"},$={class:"flex flex-col gap-1"},A={class:"text-sm text-gray-600"},H={key:0},P={key:1},j={key:2},z={key:3},E={class:"mt-2"},K={__name:"Index",setup(m){const r=T(),d=r.props.shows;r.props.auth.user;const e=U({q:r.props.filters.q||"",min_duration:r.props.filters.min_duration||"",max_duration:r.props.filters.max_duration||"",postal_code:r.props.filters.postal_code||"",sort:r.props.filters.sort||"",direction:r.props.filters.direction||"asc"});function l(){R.get(route("show.index"),e,{preserveScroll:!0,preserveState:!0})}function q(){Object.assign(e,{q:"",min_duration:"",max_duration:"",postal_code:"",sort:"",direction:"asc"}),l()}return(w,t)=>(n(),k(S,null,{default:_(()=>[o("div",null,[t[10]||(t[10]=o("h1",{class:"text-2xl font-bold mb-4"},"Liste des spectacles",-1)),o("form",{onSubmit:f(l,["prevent"]),class:"space-y-2 mb-6"},[i(o("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>e.q=s),placeholder:"Mot-clé",class:"input"},null,512),[[p,e.q]]),i(o("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>e.min_duration=s),placeholder:"Durée min",class:"input"},null,512),[[p,e.min_duration]]),i(o("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>e.max_duration=s),placeholder:"Durée max",class:"input"},null,512),[[p,e.max_duration]]),i(o("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>e.postal_code=s),placeholder:"Code postal",class:"input"},null,512),[[p,e.postal_code]]),i(o("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>e.sort=s),class:"input"},t[6]||(t[6]=[o("option",{value:""},"-- Tri --",-1),o("option",{value:"title"},"Titre",-1),o("option",{value:"duration"},"Durée",-1)]),512),[[b,e.sort]]),i(o("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>e.direction=s),class:"input"},t[7]||(t[7]=[o("option",{value:"asc"},"Asc",-1),o("option",{value:"desc"},"Desc",-1)]),512),[[b,e.direction]]),t[8]||(t[8]=o("button",{type:"submit",class:"btn"},"Filtrer",-1)),o("button",{onClick:f(q,["prevent"]),class:"btn"},"Réinitialiser")],32),o("ul",N,[(n(!0),a(y,null,g(u(d).data,s=>(n(),a("li",{key:s.id,class:"border p-4 rounded shadow-sm"},[o("div",$,[c(u(V),{href:w.route("show.show",s.id),class:"text-blue-600 hover:underline text-lg font-semibold"},{default:_(()=>[x(v(s.title),1)]),_:2},1032,["href"]),o("div",A,[s.bookable?B("",!0):(n(),a("em",H,"Réservation indisponible")),s.representations_count===1?(n(),a("span",P," - 1 représentation")):s.representations_count>1?(n(),a("span",j," - "+v(s.representations_count)+" représentations",1)):(n(),a("span",z,t[9]||(t[9]=[x(" - "),o("em",null,"aucune représentation",-1)])))]),o("div",E,[c(h,{"show-id":s.id,bookable:s.bookable,"representations-count":s.representations_count},null,8,["show-id","bookable","representations-count"])])])]))),128))]),c(L,{links:u(d).links},null,8,["links"])])]),_:1}))}},Z=D(K,[["__scopeId","data-v-65ec5d74"]]);export{Z as default};
