import{f as r,o as n,F as m,l as f,c as S,n as q,L as M,u as i,i as h,Q as B,k as F,w as k,b as s,g as V,a as b,d as w,m as a,x as p,p as v,t as d,e as c,q as C}from"./app-pR54vJex.js";import{_ as L}from"./AppLayout-Dkwqme06.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as I}from"./ReserveButton-BUc-sZAA.js";import"./LoginForm-CUtFAC-1.js";import"./TextInput-DepLL-Sb.js";import"./PrimaryButton-CxCf9rei.js";const N={class:"flex flex-wrap gap-1 mt-4"},R={__name:"Pagination",props:{links:Array},setup(g){return(l,_)=>(n(),r("div",N,[(n(!0),r(m,null,f(g.links,(o,u)=>(n(),S(M(o.url?i(h):"span"),{key:u,href:o.url||void 0,class:q(["px-3 py-1 rounded border text-sm",{"bg-blue-600 text-white":o.active,"text-gray-500 cursor-not-allowed":!o.url,"hover:bg-blue-100":o.url&&!o.active}]),innerHTML:o.label},null,8,["href","class","innerHTML"]))),128))]))}},$=D(R,[["__scopeId","data-v-70da7edf"]]),A=["value"],H={key:0,class:"mb-6"},P={class:"flex gap-2 flex-wrap mt-2"},j=["onClick"],z={class:"space-y-4"},E={class:"flex flex-col gap-1"},O={class:"text-sm text-gray-600"},Q={key:0},W={key:1},G={key:2},J={key:3},K={class:"mt-2"},X={__name:"Index",setup(g){const l=B(),_=l.props.shows;l.props.auth.user;const o=F({q:l.props.filters.q||"",min_duration:l.props.filters.min_duration||"",max_duration:l.props.filters.max_duration||"",postal_code:l.props.filters.postal_code||"",sort:l.props.filters.sort||"",direction:l.props.filters.direction||"asc",tag:l.props.filters.tag||""}),u=l.props.tags;function y(){C.get(route("show.index"),o,{preserveScroll:!0,preserveState:!0})}function T(x){C.get("/show",{...o,without_tag:x},{preserveScroll:!0,preserveState:!0})}function U(){Object.assign(o,{q:"",min_duration:"",max_duration:"",postal_code:"",sort:"",direction:"asc"}),y()}return(x,t)=>(n(),S(L,null,{default:k(()=>[s("div",null,[t[13]||(t[13]=s("h1",{class:"text-2xl font-bold mb-4"},"Liste des spectacles",-1)),s("form",{onSubmit:w(y,["prevent"]),class:"space-y-2 mb-6"},[a(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.q=e),placeholder:"Mot-clé",class:"input"},null,512),[[p,o.q]]),a(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>o.min_duration=e),placeholder:"Durée min",class:"input"},null,512),[[p,o.min_duration]]),a(s("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>o.max_duration=e),placeholder:"Durée max",class:"input"},null,512),[[p,o.max_duration]]),a(s("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>o.postal_code=e),placeholder:"Code postal",class:"input"},null,512),[[p,o.postal_code]]),a(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.sort=e),class:"input"},t[7]||(t[7]=[s("option",{value:""},"-- Tri --",-1),s("option",{value:"title"},"Titre",-1),s("option",{value:"duration"},"Durée",-1)]),512),[[v,o.sort]]),a(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.direction=e),class:"input"},t[8]||(t[8]=[s("option",{value:"asc"},"Asc",-1),s("option",{value:"desc"},"Desc",-1)]),512),[[v,o.direction]]),a(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.tag=e),class:"input"},[t[9]||(t[9]=s("option",{value:""},"-- Filtrer par mot-clé --",-1)),(n(!0),r(m,null,f(i(u),e=>(n(),r("option",{key:e.id,value:e.id},d(e.tag),9,A))),128))],512),[[v,o.tag]]),t[10]||(t[10]=s("button",{type:"submit",class:"btn"},"Filtrer",-1)),s("button",{onClick:w(U,["prevent"]),class:"btn"},"Réinitialiser")],32),i(u).length?(n(),r("div",H,[t[11]||(t[11]=s("p",{class:"font-semibold"},[c("Spectacles "),s("span",{class:"italic"},"sans"),c(" ces mots-clés :")],-1)),s("ul",P,[(n(!0),r(m,null,f(i(u),e=>(n(),r("li",{key:e.id},[s("button",{onClick:Y=>T(e.id),class:"text-red-600 hover:underline text-sm bg-red-100 px-2 py-1 rounded"},d(e.tag),9,j)]))),128))])])):V("",!0),s("ul",z,[(n(!0),r(m,null,f(i(_).data,e=>(n(),r("li",{key:e.id,class:"border p-4 rounded shadow-sm"},[s("div",E,[b(i(h),{href:x.route("show.show",e.id),class:"text-blue-600 hover:underline text-lg font-semibold"},{default:k(()=>[c(d(e.title),1)]),_:2},1032,["href"]),s("div",O,[e.bookable?V("",!0):(n(),r("em",Q,"Réservation indisponible")),e.representations_count===1?(n(),r("span",W," - 1 représentation")):e.representations_count>1?(n(),r("span",G," - "+d(e.representations_count)+" représentations",1)):(n(),r("span",J,t[12]||(t[12]=[c(" - "),s("em",null,"aucune représentation",-1)])))]),s("div",K,[b(I,{"show-id":e.id,bookable:e.bookable,"representations-count":e.representations_count},null,8,["show-id","bookable","representations-count"])])])]))),128))]),b($,{links:i(_).links},null,8,["links"])])]),_:1}))}},le=D(X,[["__scopeId","data-v-f5a63343"]]);export{le as default};
